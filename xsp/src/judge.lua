--判断当前页面
function isPage (pageName) 
  --判断是否是庭院
  
  --判断是否是盯
  
  --判断是否是 探索页面
  if pageName == "探索页面" then
		sysLog("判断是否为--探索页面");
    local lines = {};
    --结界突破  f8f3e0-333333
    lines[1] = "00201C0783E0F87E1F03C000000000803006004000000000000000100200C0183FFFFFFFFF80F00601C0380701E01C03800000000000000000000000000000000000000781FF3FF7FEF1DE0380701C1BC7FDFFFFFFF9F71CC118020040080303F9FFFFFF9FC0$结界突破$3.11.2060$106";
		
    --加载自定义字库
    local dic = createOcrDict(lines);
    local results = ocrText(dic,657,1087,782,1216, {"0xf8f3e0-0x333333"}, 95,0,0);
    sysLog("识别出来的文字是："..results);
    
    if results == "结界突破" then
      return true;
    end  
	end
  
  --判断是否是战斗页面 （根据识别自动/手动 图标判断）
  if pageName == "战斗页面" then
    sysLog("判断是否为--战斗页面");
    
		local lines = {};
    --准备  c46a22-c46a22
    lines[1] = "0020040180701E07C0F03C0F01C0701C0200000000000000000040080100300700700F01FFBF83E07C0700E01C0380300700E00C01E03E03E07C0780F00E01C0180100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200C0380F01806018060180300800000000000000000000000000600E01F03E07C0F01E03C038060080100$准备$21.33.2688$93";
    --手动  f4eedc-444444
    lines[2] = "020040080180200C0180700F01E03F8FF1CE700E03C0F01E03C0300200000000000000000000000000000000000000000000000000000000000000000000000000000000000000100200C0180300E01C0380600C0380600C0080100000000000000000000000FFBFF3FE7E0800$手动$9.9.828$47";
    --自动	f4eedc-444444
    lines[3] = "00603C1E0F8FE1F81C03804000000080100600C01801002000000000000000000000000000000000000000000000000000000000000000000000000000000080100600C0180700E01C0300601C0300600400800000000000000000000007FFFFDFFBF0400$自动$6.9.859$45";
    
    --加载自定义字库
    local dic = createOcrDict(lines);
    local results = ocrText(dic,1887,856,2137,1043, {"0xc46a22-0xc46a22"}, 95,0,0);
    sysLog("识别出来的文字是："..results);
    if results == "准备" then
      return true;
    end
		
    --加载自定义字库
		results = ocrText(dic,50,1091,167,1200, {"0xf4eedc-0x444444"}, 95,0,0);
    sysLog("识别出来的文字是："..results);
    
    if results == "自动"  or results == "手动" then
      return true;
    end    
  end
  
  
  --判断是否是妖怪发现副本中
  if pageName == "妖怪发现副本" then
    sysLog("判断是否为--妖怪发现副本")
    
    local lines = {};
    --锁定出战式神  fcfdfd-999999
    lines[1] = "00200C0F8FF3FE7FCF08C1002004008010000080380700E00C001807FEFFDFF9FF0000040180F03C1F83E0380300000000000000000000000000000000000040180700E00C0180300E01C03B0770EF19F33EE3FC1F80F01C0380700E01C07E0FC1F81F03E0380300000000000000000000000000000000000000000000000000000000000000000000000000000200FC1FFFFFFFF7FE000000000000000000000200C0080100200000000000000000000000000000000000000000000000000001FE3FC3F87F0000000000000000000000000E03FC3FF7FE7FC00000000180380780F00F01F00000000000000000000000000000000000000000000000000000000000000000000000000000200FE1FF3FFBFF01E00400801002004C09C13C07C0F80F0000000000000000000000000000000000000000000000000000000000000000180380780F01F01F0180$锁定出战式神$8.0.2944$43";
    
    --加载自定义字库
    local dic = createOcrDict(lines);
    local results = ocrText(dic,1777,1092,2071,1148, {"0xfcfdfd-0x999999"}, 85,0,0);
    sysLog("识别出来的文字是："..results);
    
    if results == "锁定出战式神" then
      return true;
    end  
  end
  
  return false;
end

--每次任务之前，先判断是否有弹出框，并做处理，以免程序无法正常运行
function isAlert (alertName)
  
  --判断是否收到协作任务弹出框
  
  --判断是否是邀请弹出框
  
  --判断是否是取消/确认 弹出框
  
  return false;
end


function isTeam () 
  
  local points = {
    {x = 28-86, y = 273 - 215, color = 0x3d2a27},
    {x = 87 - 86, y = 328 - 215, color = 0x4a3c1e},
    {x = 142 - 86, y = 270 - 215, color = 0x412d2b}
  };
  
  local x, y = findMultiColorInRegionFuzzy2(0x62441f, points, 95, 9,187,154,538);
  
  if x ~= -1 and y ~= -1 then
    return true;
  else                 
    return false;
  end
end


function isReceivedInvitation ()

	local lines = {};
	lines[1] = "00600C0780F07E0FC7F8FF7FEFFEFFFFF7FE7FC7F87F07E07C07807006004$√$59.6.2411$65";
  local dict = createOcrDict(lines);
	local results = ocrText(dict, 172,376,314,507, {"0x5cb766-0x333333"}, 99, 0, 0);
	
	sysLog("识别出来的文字是："..results);

	if results == "√" then
		return true;
	else 
		return false;	
	end

end

--是否是点击屏幕继续页面
function isTapToContinue () 

	local lines = {};
	local results = "";
	local dict = {};
	
	--胜利鼓  0x831b11-0x222222
	lines = {};
	lines[1] = "0020040080300E01C0380701E03C0F81F03E0FC1F87F0FE1FC3F87F0FE1FC7F8FF1FE7FCFF9FF3FE7FCFF9FF3FEFFDFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFDFFBFF3FE7FCFF9FF3FE7FC7F8FF0FE1FC3F87F07E07C0F81F03E01C038070060040080000000000000000000000000000000000000000180300300700E01E03C03C0780F80F81F03F07F0FE0FC0F81F03E03C0780700E00C00801002$胜利鼓$48.47.13469$112";
  dict = createOcrDict(lines);
	results = ocrText(dict, 693,206,975,449, {"0x831b11-0x222222"}, 95, 0, 0);
	sysLog("识别出来的文字是："..results);

	if results == "胜利鼓" then
		return true;
	end
	
	
	--胜   
	lines = {};
	--0x171615-0x222222
	lines[1] = "1C07E1FFFFFFFFFFFFFFFFFFFFFFFFFFF7FEFFCFF9FF1FE1FC3F83F03E07C07807006$胜$92.53.8688$109";
	--0x2b2923-0x222222
	lines[2] = "100FC1FFBFF7FEFFDFFBFFFFFFFDFFBFF7FE7FC7F8FF1FE1FC1F81F01E03C01801$胜$94.53.7923$110";
	dict = createOcrDict(lines);
	
	results = ocrText(dict, 970,637,1238,1045, {"0x171615-0x222222"}, 95, 0, 0);
	sysLog("识别出来的文字是："..results);
	if results == "胜" then
		return true;
	end
	
	--失败鼓   0x4d4555-0x222222
	lines = {};
	lines[1] = "0020040180700E01C0780F03E07C0F81F07E0FC3F87F0FE1FC3F87F1FE3FC7F8FF3FE7FCFF9FF3FE7FCFFBFF7FEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFDFFBFF7FEFFCFF9FF3FE7FCFF8FF1FE1FC3F87F07E0FC0F81F01E03C0380700600400800000000000000000000000000000000000601E03C03C07C0F80F81F03F07E07E0FE1FC1FC3F87F0FE0FC1F81F03E03C0780700E01C01801002$失败鼓$49.47.9947$89";
	dict = createOcrDict(lines);
	results = ocrText(dict, 675,189,958,427, {"0x4d4555-0x222222"}, 95, 0, 0);
	sysLog("识别出来的文字是："..results);
	if results == "失败鼓" then
		return true;
	end

	return false;
end

--是否是获得奖励页面
function isGetReward () 
 
    local lines = {};
    --获得奖励  0xf3e6af-0x555555
    lines[1] = "00603C0783F07E0FC1F83F03E03C0780F01E01C0180300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080307E1FC7F9FF3FEFFDFFFFF7FE7FCFF8FF0FE0FC0F800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100600C0380700E01C0180300000000000000000000000000000000000000000000000000000000000000380F03E0FC1F83F07E0FC0F80F01E03C0780F01E03C0780F01E03C0780F01E03C0F81F07E0FC1F83F07E0FC1F83F07E0FC1F83F07E0FC1F83F07E0FC1F81F01E03C01803$获得奖励$23.255.12158$113";
		
		--加载自定义字库
    local dic = createOcrDict(lines);
    local results = ocrText(dic,792,310,1419,478, {"0xf3e6af-0x555555"}, 90,0,0);
    sysLog("识别出来的文字是："..results);
    
    if results == "获得奖励" then
      return true;
    end  
  
  return false;
end

function isCooperation ()
	local isCooperation = false;	--是否为协作任务
	local isValueType = false; --是否为奖励勾玉或体力任务
	
	
	local lines = {};
    --悬赏封印邀请  0x272420-0x333333
    lines[1] = "01E0FC3F87F07A0E01C0300601C0380600C0180700E01FE3FCFF9FF1FE1FC0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F01FA1FC1F8070060040080300600DFFFFF7FEFFC6380300E01C0781F07E1DC799F37E67CC6180300600C0180300600C0380700E00C00800000000000000000000000000000000000000000000000000000003F0FE3FC7F87F07E00000000000000000000000000000000000000000000000000000603FC7F8FF1FE1FC0F8000000000000000000000000000000000000000000000000E03C0780F01E03C0780F01E07C0F83F07E0FC1F80E01C00000000000000000000000000000000000000000000000000000000000080300601C018030060040000000000000000000000000000000000000000000000000000000000000000000380701E03C1F87F7FE7DC$悬赏封印邀请$14.250.4693$61";
		--加载自定义字库
    local dic = createOcrDict(lines);
    local results = ocrText(dic,855,223,1335,340, {"0x272420-0x333333"}, 90,0,0);
    sysLog("识别出来的文字是："..results);
    
    if results == "悬赏封印邀请" then
      isCooperation = true;
			
			----是否为奖励勾玉或体力任务
			--勾玉
			local x, y = findMultiColorInRegionFuzzy(0xe8513b,"23|5|0xba130f,34|32|0xb51412,11|74|0xc2150d,5|49|0xa0846f,-15|79|0x8e7460,-14|48|0xd2b497,-27|20|0xc5ac8e", 95, 1115, 785, 1244, 908)
			if x > -1 then
				isValueType = true;
			end
			
    end 
	
	return isCooperation, isValueType;
end

--判断是否是探索或挑战弹出框
function isExplorationAlert ()
		local lines = {};
    --探索  0xfcfaf8-0x666666
    lines[1] = "201FF3FFBFF7FE780000000000000080301E07C1E0380700C0188300600C0380700C0180300E01C0300601C03DC7F0FE0FC0F00E0180$探索$7.5.1290$109";
		
		--加载自定义字库
    local dic = createOcrDict(lines);
    local results = ocrText(dic,1860,402,1944,566, {"0xfcfaf8-0x666666"}, 95,0,0);
    sysLog("识别出来的文字是："..results);
    
    if results == "探索" then
      return true;
    end  
  
  return false;
end

--判断是否是组队邀请
function isMakeTeamAlert ()
			local lines = {};
    --组队获得  0x272420-0x444444
    lines[1] = "00201C1F87F07C0F000000000000000000000040180300600C0180300600C0180700E01C0380300600C0000000000000000000000000000000000600F01E03C0780C0380F01F83F07E07806000000000000000000000F83F07E0FC0400000000000000000000000000000000000000000000000000000000000000000180300600C0180700E01C7F8FF1FE1FC0780E0180300600C01803C0F87F7FFFFBFE3FC6780F01E03C0780F01E03C0300000000000000000000000000000000000000080300E03C3F8FE3F07C070040000000200F01FE3FC7F8EF19C338661CC398E31C638D71EFFDFF9FF1F83C0200$组队获得$6.4.2262$43";
		--加载自定义字库
    local dic = createOcrDict(lines);
    local results = ocrText(dic,1028,189,1586,247, {"0x272420-0x444444"}, 95,0,0);
    sysLog("识别出来的文字是："..results);
    
    if results == "组队获得" then
      return true;
    end  
  
  return false;
	
end
